import { isFunction } from 'vest-utils';

/**
 * Accepts a value or a function, and coerces it into a boolean value
 */
function run(arg) {
    if (isFunction(arg)) {
        try {
            return check(arg());
        }
        catch (err) {
            return false;
        }
    }
    return check(arg);
}
function check(value) {
    // We use abstract equality intentionally here. This enables falsy valueOf support.
    return Array.isArray(value) ? true : value != false && Boolean(value);
}

/**
 * Checks that at only one passed argument evaluates to a truthy value.
 */
function one() {
    var args = [];
    for (var _i = 0; _i < arguments.length; _i++) {
        args[_i] = arguments[_i];
    }
    var count = 0;
    for (var i = 0; i < args.length; i++) {
        if (run(args[i])) {
            count++;
        }
        if (count > 1) {
            return false;
        }
    }
    return count === 1;
}

export { one as default };
